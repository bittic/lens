(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Account"],{"06e8":function(t,e,s){var a=s("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/******* LOG 私有定义 ************/.sCardContent .sColorText[data-v-ac42c9d2]{cursor:pointer}.sCardContent .sColorText .sColorCode[data-v-ac42c9d2]{padding:4px 0}.sStat[data-v-ac42c9d2]{border:1px solid #eee;border-radius:%?20?%;margin:%?4?% %?16?%;font-size:small;padding:%?8?% %?16?%\n}.sStat uni-text[data-v-ac42c9d2]{color:#fc4e2b;padding-left:8px}@media screen and (min-width:751px){.sStat[data-v-ac42c9d2]{margin:4px 16px;padding:8px 16px}}.sCell4hash[data-v-ac42c9d2]{width:20%;cursor:pointer}.sCell4type[data-v-ac42c9d2]{width:10%}.sCell4oponent[data-v-ac42c9d2]{width:20%;cursor:pointer}.sCell4direction[data-v-ac42c9d2]{width:10%}.sCell4timeiso[data-v-ac42c9d2]{width:10%}.sCell4amount[data-v-ac42c9d2]{width:10%}.sCell4fee[data-v-ac42c9d2]{width:5%}.sCell4message[data-v-ac42c9d2]{width:15%}',""]),t.exports=e},"2c04":function(t,e,s){"use strict";s.r(e);var a=s("9cf2"),i=s("b8af");for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s("6d78");var o,l=s("f0c5"),c=Object(l["a"])(i["default"],a["b"],a["c"],!1,null,"ac42c9d2",null,!1,a["a"],o);e["default"]=c.exports},"369e":function(t,e,s){var a=s("06e8");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=s("4f06").default;i("61461c26",a,!0,{sourceMap:!1,shadowMode:!1})},"6d78":function(t,e,s){"use strict";var a=s("369e"),i=s.n(a);i.a},"9cf2":function(t,e,s){"use strict";var a,i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:"sPage"},[s("v-uni-view",{staticClass:"sHeader"},[s("div",{staticClass:"sSlogan"},[t._v(t._s(t.appName))])]),s("v-uni-view",{staticClass:"sBody"},[s("v-uni-view",{staticClass:"sContent"},[s("v-uni-view",{staticClass:"sCardGroup"},[s("v-uni-view",{staticClass:"sCardBox"},[s("v-uni-view",{staticClass:"sCard"},[s("v-uni-view",{staticClass:"sCardTitle"},[s("span",[t._v(t._s(t.localeText.tAddress))]),s("v-uni-view",{staticClass:"sActGroup"},[s("v-uni-button",{staticClass:"sActButton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout.apply(void 0,arguments)}}},[s("v-uni-view",{staticStyle:{backgroundImage:"url(../static/Common.exit.png)"}}),t._v(t._s(t.localeText.tLogout))],1)],1)],1),s("v-uni-view",{staticClass:"sCardContent",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyAddress.apply(void 0,arguments)}}},[s("cColorText",{attrs:{type:"b64u",colorText:t._SS.ownerAddress}})],1)],1)],1),s("v-uni-view",{staticClass:"sCardBox"},[s("v-uni-view",{staticClass:"sCard"},[s("v-uni-view",{staticClass:"sCardTitle"},[s("span",[t._v(t._s(t.localeText.tBalance))]),s("v-uni-view",{staticClass:"sActGroup"},[s("v-uni-navigator",{attrs:{url:"AccountDeposit"}},[s("v-uni-button",{staticClass:"sActButton"},[s("v-uni-view",{staticStyle:{backgroundImage:"url(../static/Common.deposit.png)"}}),t._v(t._s(t.localeText.tDeposit))],1)],1),s("v-uni-navigator",{attrs:{url:"AccountTransfer"}},[s("v-uni-button",{staticClass:"sActButton"},[s("v-uni-view",{staticStyle:{backgroundImage:"url(../static/Common.transfer.png)"}}),t._v(t._s(t.localeText.tTransfer))],1)],1)],1)],1),s("v-uni-view",{staticClass:"sCardContent",staticStyle:{display:"flex","flex-flow":"row wrap"}},[s("v-uni-view",{staticClass:"sStat"},[s("v-uni-label",[t._v("资金余额")]),s("v-uni-text",[t._v(t._s(t._SS.ownerBalance))])],1),s("v-uni-view",{staticClass:"sStat"},[s("v-uni-label",[t._v("交易次数")]),s("v-uni-text",[t._v(t._s(t.ownerAccount.countAction||0))])],1)],1)],1)],1)],1),s("v-uni-view",{staticClass:"sTableBox"},[s("v-uni-view",{staticClass:"sTable"},[s("v-uni-view",{staticClass:"sTableTitle"},[t._v(t._s(t.localeText.tTableTitle)),s("v-uni-input",{staticClass:"sSearchbar",attrs:{type:"text",placeholder:t.localeText.tSearchbarPrompt,"placeholder-class":"sSearchbarPlaceholder","confirm-type":"search"}})],1),s("v-uni-view",{staticClass:"sTableHead"},t._l(t.localeText.tFieldList,(function(e,a){return s("v-uni-view",{key:a,staticClass:"sTableHeadCell",class:"sCell4"+a},[t._v(t._s(e))])})),1),s("v-uni-view",{staticClass:"sTableBody"},t._l(t.actionList,(function(e,a){return s("v-uni-view",{key:e.hash,staticClass:"sTableRow"},[s("v-uni-view",{staticClass:"sTableRowCell sCell4hash",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyCell(a,"hash")}}},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.hash))]),s("cColorText",{attrs:{colorText:e.hash}})],1),s("v-uni-view",{staticClass:"sTableRowCell sCell4type"},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.type))]),s("span",{staticClass:"sCellText"},[t._v(t._s(e.type))])],1),s("v-uni-view",{staticClass:"sTableRowCell sCell4oponent",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyCell(a,"oponent")}}},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.oponent))]),s("cColorText",{attrs:{type:"b64u",colorText:e.oponent}})],1),s("v-uni-view",{staticClass:"sTableRowCell sCell4direction"},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.direction))]),s("span",{staticClass:"sCellText"},[t._v(t._s(e.direction))])],1),s("v-uni-view",{staticClass:"sTableRowCell sCell4timeiso"},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.timeiso))]),s("span",{staticClass:"sCellText"},[t._v(t._s(t.formatDate(e.timeiso)))])],1),s("v-uni-view",{staticClass:"sTableRowCell sCell4amount"},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.amount))]),s("span",{staticClass:"sCellText"},[t._v(t._s(e.amount))])],1),s("v-uni-view",{staticClass:"sTableRowCell sCell4fee"},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.fee))]),s("span",{staticClass:"sCellText"},[t._v(t._s(e.fee))])],1),s("v-uni-view",{staticClass:"sTableRowCell sCell4message"},[s("v-uni-label",{staticClass:"sCellLabel"},[t._v(t._s(t.localeText.tFieldList.message))]),s("span",{staticClass:"sCellText"},[t._v(t._s(e.message))])],1)],1)})),1),s("v-uni-view",{staticClass:"sTableFoot"},[s("cPager",{attrs:{title:"翻页","show-icon":"true","show-edge":"true",total:t.ownerAccount.countAction,current:"1",pageSize:t.pageSize},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.loadActionList.apply(void 0,arguments)}}})],1)],1)],1)],1)],1)],1)},n=[];s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return a}))},b8af:function(t,e,s){"use strict";s.r(e);var a=s("f671"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},f671:function(t,e,s){"use strict";(function(t){var a=s("ee27");s("99af"),s("d81d"),s("4e82"),s("dca8"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(s("d0ff")),n=a(s("d0af"));s("96cf");var o=a(s("c964")),l={data:function(){return{i18nText:Object.freeze({zhCN:{tPageTitle:"账户",tFieldList:{hash:"哈希",type:"类型",oponent:"对方",direction:"方向",timeiso:"时间",amount:"金额",fee:"费用",message:"备注"},tAddress:"我的账号",tLogout:"退出",tBalance:"我的财富",tDeposit:"存入",tTransfer:"转出",tTableTitle:"我的交易",tAddressCopied:"我的账号已拷贝",tCellCopied:"已拷贝",tEmptyAddress:"我的账号为空",tSwitchPrompt:"您真的要退出当前账户吗？",tSwitchConfirm:"退出",tSwitchCancel:"取消",tLoadingTitle:"加载中...",tSearchbarPrompt:"搜索功能即将上线"},enUS:{tPageTitle:"Account",tFieldList:{hash:"Hash",type:"Type",oponent:"Oponent",direction:"Direction",timeiso:"Time",amount:"Amount",fee:"Fee",message:"Notes"},tAddress:"My Address",tLogout:"Logout",tBalance:"My Balance",tDeposit:"存入",tTransfer:"转出",tTableTitle:"My Actions",tAddressCopied:"My address is copied to clipboard successfully",tCellCopied:"is copied to clipboard",tEmptyAddress:"My address is empty",tSwitchPrompt:"Are you sure to logout?",tSwitchConfirm:"Logout",tSwitchCancel:"Cancel",tLoadingTitle:"Loading...",tSearchbarPrompt:"Search will go online soon"}}),actionList:[],pageSize:10,ownerAccount:{}}},computed:{localeText:function(){return this.i18nText[this._SS.i18n.activeLang]},appName:function(){return this.$store.getters["i18n/getAppName"]}},onLoad:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.uni2log.relaunch4newSession()){e.next=5;break}return e.next=3,t.loadAccount();case 3:return e.next=5,t.loadActionList({type:"TOP"});case 5:case"end":return e.stop()}}),e)})))()},onShow:function(){document.title=this.appName,this._SC("i18n/setTabbar")},methods:{loadAccount:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function s(){var a,i,o,l,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return uni.showLoading({title:"正在加载账户信息..."}),s.next=3,e.uni2log.request({url:"api/Account/getAccount",data:{where:{address:e._SS.ownerAddress}}});case 3:a=s.sent,i=(0,n.default)(a,2),i[0],o=i[1],o=void 0===o?{}:o,l=o.data,o.header,c=o.statusCode,uni.hideLoading(),200===c?l&&"Account"===l._class&&(e._SS.ownerBalance=l.balance,e.ownerAccount=l,t("log","account = ",l," at pages/Account.vue:75")):uni.showToast({image:"../static/Common.fail.png",title:"账户加载失败"});case 11:case"end":return s.stop()}}),s)})))()},loadActionList:function(e){var s=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var o,l,c,r,u,d,v,p,C,w;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.type,e.current,t("log","Action.loadActionList: go to ".concat(o)," at pages/Account.vue:84"),c=s.actionList.length?s.actionList[0].timeiso:0,r=s.actionList.length?s.actionList[s.actionList.length-1].timeiso:0,t("log",{upTimeiso:c,downTimeiso:r}," at pages/Account.vue:88"),"LEFT"!==o){a.next=9;break}l={where:{myAddress:s._SS.ownerAddress,timeiso:">".concat(c)},order:{timeiso:"DESC"},take:s.pageSize},a.next=22;break;case 9:if("RIGHT"!==o){a.next=13;break}l={where:{myAddress:s._SS.ownerAddress,timeiso:"<".concat(r)},order:{timeiso:"DESC"},take:s.pageSize},a.next=22;break;case 13:if("TOP"!==o&&"LEFT_END"!==o){a.next=17;break}l={where:{myAddress:s._SS.ownerAddress},order:{timeiso:"DESC"},take:s.pageSize},a.next=22;break;case 17:if("ground"!==o&&"RIGHT_END"!==o){a.next=21;break}l={where:{myAddress:s._SS.ownerAddress},order:{timeiso:"DESC"},take:s.pageSize},a.next=22;break;case 21:return a.abrupt("return");case 22:if(!("LEFT_END"===o&&s.actionList[0]&&new Date-new Date(s.actionList[0].timeiso)<6e4)){a.next=25;break}return uni.showToast({image:"../static/Common.info.png",title:"已是最新交易"}),a.abrupt("return");case 25:return uni.showLoading({title:"正在加载交易记录..."}),a.next=28,s.uni2log.request({url:"api/Action/getMyActionList",data:l});case 28:u=a.sent,d=(0,n.default)(u,2),d[0],v=d[1],v=void 0===v?{}:v,p=v.data,v.header,C=v.statusCode,uni.hideLoading(),200===C&&p&&(p.fromMe||p.toMe)&&(t("log","received data:",p," at pages/Account.vue:114"),p.fromMe.map((function(t,e,s){t.direction="fromMe",t.oponent=t.toAddress})),p.toMe.map((function(t,e,s){t.direction="toMe",t.oponent=t.actorAddress})),w=[].concat((0,i.default)(p.fromMe),(0,i.default)(p.toMe)),t("log",w," at pages/Account.vue:124"),w.sort((function(t,e){return t<e?1:t===e?0:-1})),s.actionList=w);case 36:case"end":return a.stop()}}),a)})))()},copyAddress:function(){var t=this;this._SS.ownerAddress?uni.setClipboardData({data:this._SS.ownerAddress,success:function(){uni.showToast({title:t.localeText.tAddressCopied})}}):uni.showToast({title:this.localeText.tEmptyAddress,image:"../static/Common.fail.png"})},copyCell:function(t,e){var s=this;uni.setClipboardData({data:this.actionList[t][e],success:function(){uni.showToast({image:"../static/Common.success.png",title:"".concat(s.localeText.tFieldList[e]," ").concat(s.localeText.tCellCopied)})}})},logout:function(){var t=this;uni.showModal({title:this.localeText.tSwitchPrompt,content:this._SS.ownerAddress,confirmText:this.localeText.tSwitchConfirm,cancelText:this.localeText.tSwitchCancel,success:function(e){var s=e.confirm;e.cancel;s&&(uni.removeStorageSync("ownerAddress"),t._SC("resetOwnerAccount"),t.ownerAccount={},uni.reLaunch({url:"IdentUser"}))}})},formatDate:function(t){return new Date(t).formatMe("yyyy-mm-dd HH:MM:SS")}}};e.default=l}).call(this,s("0de9")["log"])}}]);