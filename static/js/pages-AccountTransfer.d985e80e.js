(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-AccountTransfer"],{"1b83":function(e,t,r){"use strict";e.exports=r("2bb9")},"298d":function(e,t,r){"use strict";var n,a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"sPage"},[r("v-uni-view",{staticClass:"sBody"},[r("v-uni-view",{staticClass:"sContent"},[r("v-uni-view",{staticClass:"sViewField"},[e._v("我的账号 "+e._s(e._SS.ownerAddress))]),r("v-uni-view",{staticClass:"sViewField"},[e._v("当前余额 "+e._s(e._SS.ownerBalance))]),r("v-uni-view",{staticClass:"sLabel"},[e._v("对方地址")]),r("v-uni-view",{staticClass:"sInputField"},[r("v-uni-input",{staticClass:"sAddress",attrs:{type:"text",placeholder:"输入对方地址"},model:{value:e.toAddress,callback:function(t){e.toAddress=t},expression:"toAddress"}})],1),r("v-uni-view",{staticClass:"sLabel"},[e._v("转账金额")]),r("v-uni-view",{staticClass:"sInputField"},[r("v-uni-input",{staticClass:"sAmount",attrs:{type:"number",placeholder:"输入转账金额"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),r("v-uni-view",{staticClass:"sLabel"},[e._v("加密签名")]),r("v-uni-view",{staticClass:"sInputField"},[r("v-uni-textarea",{staticClass:"sSecwordTextarea",attrs:{"auto-height":"true",focus:"true",maxlength:"-1",placeholder:"输入您当前登录账号的密语"},model:{value:e.ownerSecword,callback:function(t){e.ownerSecword=t},expression:"ownerSecword"}})],1),r("v-uni-view",{staticClass:"sFooterFloating"},[r("v-uni-button",{staticClass:"sSubmitButton",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.transfer.apply(void 0,arguments)}}},[e._v("转 账")])],1),r("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.test.apply(void 0,arguments)}}},[e._v("填入测试数据")])],1)],1)],1)},s=[];r.d(t,"b",function(){return a}),r.d(t,"c",function(){return s}),r.d(t,"a",function(){return n})},"2bb9":function(e,t,r){"use strict";(function(t,n){var a=r("288e"),s=a(r("a745"));r("96cf");var i=a(r("3b8d")),o=a(r("a4bb"));r("55dd");var u=a(r("5d73")),c=a(r("f499")),l=r("11c1"),d=t.mylog||n,h=e.exports=function(){this._class=this.constructor.name},f=h.prototype;f.setProp=function(e){for(var t in e=e||{},this._model)if(e.hasOwnProperty(t)&&"undefined"!==typeof e[t]&&e[t]===e[t]&&e[t]!==1/0)this[t]=e[t];else if("undefined"===typeof this[t]){var r=this._model[t].default;this[t]=r&&"object"===typeof r?JSON.parse((0,c.default)(r)):r}return this},f.getProp=function(e){e=e||{};var t={},r=!0,n=!1,a=void 0;try{for(var s,i=(0,u.default)((0,o.default)(this._model).sort());!(r=(s=i.next()).done);r=!0){var c=s.value;"undefined"!==typeof e[c]&&e[c]===e[c]&&e[c]!==1/0?t[c]=e[c]:"undefined"!==typeof this[c]&&this[c]===this[c]&&this[c]!==1/0&&(t[c]=this[c])}}catch(l){n=!0,a=l}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}return t},f.filterProp=function(e){for(var t in e=e||{},e)this._model.hasOwnProperty(t)&&"undefined"!==typeof e[t]&&e[t]===e[t]&&e[t]!==1/0||delete e[t];return e},f.getJson=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getProp(),r=!0,n=!1,a=void 0;try{for(var s,i=(0,u.default)(e.exclude||[]);!(r=(s=i.next()).done);r=!0){var o=s.value;delete t[o]}}catch(d){n=!0,a=d}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}var l=(0,c.default)(t);return l},f.normalize=(0,i.default)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.solet||!this.hasOwnProperty("ownerSid")){e.next=5;break}return this._data=this._data||{},e.next=4,this.getOwner();case 4:this._data.owner=e.sent;case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}},e,this)})),f.getOwner=(0,i.default)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.solet||!this.hasOwnProperty("ownerSid")){e.next=8;break}if(!this.ownerSid){e.next=7;break}return e.next=4,wo.Person.getOne({Person:{aiid:this.ownerSid}});case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",wo.Config.PERSON_UNKNOWN);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)})),f._eventPool=null,f.addWatcher=function(e,t){null==this._eventPool&&(this._eventPool={}),"undefined"==typeof this._eventPool[e]&&(this._eventPool[e]=[]),this._eventPool[e].push(t)},f.dropWatcher=function(e,t){if(null!=this._eventPool&&this._eventPool[e]instanceof Array){var r=this._eventPool[e];for(var n in r)if(r[n]===t){r.splice(n,1);break}}},f.dropWatcherAll=function(e){null!=this._eventPool&&(this._eventPool[e]=void 0)},f.triggerEvent=function(e,t,r){var n={type:e,target:this};if(null!=this._eventPool&&this._eventPool[n.type]instanceof Array){var a=this._eventPool[n.type];for(var s in a)a[s](n,t,r)}},f.getMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=this,r=r||{},i=r.excludeSelf?a.filterProp(r[a._class]):a.getProp(r[a._class]),t.solet&&(delete i.whenInserted,delete i.whenUpdated),!("object"===typeof i&&i&&(0,o.default)(i).length>0)){e.next=11;break}return t.solet&&this.hasOwnProperty("mark")&&(i.mark="!="+wo.Config.MARK_DELETED),r.config=r.config||{},r.config.limit=1,e.next=10,this._database.getData({_table:this._table,where:i,config:r.config}).then(function(e){return(0,s.default)(e)&&e[0]?(a.setProp(e[0]),a):null}).catch(n.log);case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f.setMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){var a,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=this,r=r||{},i=r.excludeSelf?a.filterProp(r[a._class]):a.getProp(r[a._class]),t.solet&&(delete i.aiid,delete i.uuid,"mysql"===wo.Config.dbType?(delete i.whenInserted,delete i.whenUpdated):"sqlite"===wo.Config.dbType&&this.hasOwnProperty("whenUpdated")&&(delete i.whenInserted,i.whenUpdated=new Date)),u={},!r.cond){e.next=9;break}u=a.filterProp(r.cond),e.next=18;break;case 9:if(!r[a._class]||!r[a._class][a._tablekey]){e.next=13;break}u[a._tablekey]=r[a._class][a._tablekey],e.next=18;break;case 13:if(!a[a._tablekey]){e.next=17;break}u[a._tablekey]=a[a._tablekey],e.next=18;break;case 17:return e.abrupt("return",null);case 18:if(!("object"===typeof u&&u&&(0,o.default)(u).length>0&&"object"===typeof i&&i&&(0,o.default)(i).length>0)){e.next=23;break}return t.solet&&this.hasOwnProperty("mark")&&(u.mark="!="+wo.Config.MARK_DELETED),e.next=22,this._database.setData({_table:this._table,where:u,set:i,config:{limit:1}}).then(function(e){return(0,s.default)(e)&&e[0]?(a.setProp(e[0]),a):null}).catch(n.log);case 22:return e.abrupt("return",e.sent);case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f.addMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this,r=r||{},i=r.excludeSelf?a.filterProp(r[a._class]):a.getProp(r[a._class]),t.solet&&("mysql"===wo.Config.dbType?(delete i.whenInserted,delete i.whenUpdated):"sqlite"===wo.Config.dbType&&this.hasOwnProperty("whenInserted")&&(i.whenUpdated=i.whenInserted=new Date)),this.hasOwnProperty("uuid")&&!i.uuid&&(i.uuid="".concat(a._class,"-").concat(l.v4())),e.next=7,this._database.addData({_table:this._table,set:i,config:{limit:1}}).then(function(e){return(0,s.default)(e)&&e[0]?(a.setProp(e[0]),a):null}).catch(n.log);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f.hideMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this,t=t||{},a={},t.excludeSelf?a=r.filterProp(t[r._class]):t[r._class]&&t[r._class][r._tablekey]?a[r._tablekey]=t[r._class][r._tablekey]:this[r._tablekey]?a[r._tablekey]=this[r._tablekey]:a=r.getProp(t[r._class]),!("object"===typeof a&&a&&(0,o.default)(a).length>0)){e.next=9;break}if(!r.hasOwnProperty("mark")){e.next=9;break}return e.next=8,this._database.setData({_table:this._table,where:a,set:{mark:wo.Config.MARK_DELETED},config:{limit:1}}).then(function(e){return(0,s.default)(e)&&e[0]?(r.setProp(e[0]),r):null}).catch(n.log);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f.dropMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this,t=t||{},a={},t.excludeSelf?a=r.filterProp(t[r._class]):t[r._class]&&t[r._class][r._tablekey]?a[r._tablekey]=t[r._class][r._tablekey]:this[r._tablekey]?a[r._tablekey]=this[r._tablekey]:a=r.getProp(t[r._class]),!("object"===typeof a&&a&&(0,o.default)(a).length>0)){e.next=8;break}return e.next=7,this._database.dropData({_table:this._table,where:a,config:{limit:1}}).then(function(e){return e}).catch(n.log);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h._init=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.prototype._database=t,e.next=3,this.createTable();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.createTable=(0,i.default)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return d.info("Creating table "+this.prototype._table),e.next=3,this.prototype._database.createTable({_table:this.prototype._table,_model:this.prototype._model});case 3:return e.sent,d.info("******* Table is ready: "+this.prototype._table),e.abrupt("return",this);case 6:case"end":return e.stop()}},e,this)})),h.getCount=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=r||{},t.solet&&(r[this.name]=r[this.name]||{},r[this.name].starId=r[this.name].starId||r.starId),a=this.prototype.filterProp(r[this.name]),t.solet&&this.prototype._model["mark"]&&(a.mark="!="+wo.Config.MARK_DELETED),e.next=6,this.prototype._database.getNumber({_table:this.prototype._table,where:a,field:"*",func:"count"}).then(function(e){return e}).catch(n.log);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.getSum=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=t||{},!t.field){e.next=6;break}return r=this.prototype.filterProp(t[this.name]),e.next=5,this.prototype._database.getNumber({_table:this.prototype._table,where:r,field:t.field,func:"sum"}).then(function(e){return e}).catch(n.log);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.getAllCall=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this,!t._proc){e.next=5;break}return e.next=4,this.prototype._database.callProc(t).then(function(e){if((0,s.default)(e)){var t=!0,n=!1,a=void 0;try{for(var i,o=(0,u.default)(e);!(t=(i=o.next()).done);t=!0){var c=i.value;c.__proto__=r.prototype,c._class=r.name}}catch(l){n=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}return[]}).catch(n.log);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.getAll=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=r||{},a=this,t.solet&&(r[this.name]=r[this.name]||{},r[this.name].starId=r[this.name].starId||r.starId),i=a.prototype.filterProp(r[a.name]),t.solet&&this.prototype._model["mark"]&&(i.mark="!="+wo.Config.MARK_DELETED),e.next=7,this.prototype._database.getData({_table:this.prototype._table,where:i,config:r.config}).then(function(e){if((0,s.default)(e)){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,u.default)(e);!(t=(i=o.next()).done);t=!0){var c=i.value;c.__proto__=a.prototype,c._class=a.name}}catch(l){r=!0,n=l}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e}return[]}).catch(n.log);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.getOne=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r||"object"!==typeof r[this.name]){e.next=6;break}return t.solet&&(r[this.name].starId=r[this.name].starId||r.starId),r.excludeSelf=!0,e.next=5,(new this).getMe(r);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.setOne=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r||"object"!==typeof r[this.name]){e.next=6;break}return t.solet&&(r.cond&&"object"===typeof r.cond?r.cond.starId=r.cond.starId||r.starId:"Person"===this.name&&r[this.name].aiid===r._passtoken.onlineSid?r.cond={aiid:r._passtoken.onlineSid}:"Person"!==this.name&&r[this.name].aiid&&(r.cond={aiid:r[this.name].aiid,ownerSid:r._passtoken.onlineSid,starId:r.starId})),r.cond&&"object"===typeof r.cond&&(r.excludeSelf=!0),e.next=5,(new this).setMe(r);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.addOne=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r||"object"!==typeof r[this.name]){e.next=5;break}return t.solet&&(r[this.name].ownerSid=r._passtoken.onlineSid,r[this.name].starId=r[this.name].starId||r.starId),e.next=4,(new this).addMe(r);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.hideOne=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.solet||!r._passtoken.isOnline()||"object"!==typeof r[this.name]){e.next=6;break}if("Person"===this.name||!r[this.name].aiid){e.next=6;break}return r[this.name]={aiid:r[this.name].aiid,ownerSid:r._passtoken.onlineSid,starId:r.starId},e.next=5,(new this).hideMe(r);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.dropOne=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t||"object"!==typeof t[this.name]){e.next=4;break}return e.next=3,(new this).dropMe(t);case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.dropAll=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this,t=t||{},a=r.prototype.filterProp(t[r.name]),!("object"===typeof a&&a&&(0,o.default)(a).length>0)){e.next=7;break}return e.next=6,this.prototype._database.dropData({_table:this.prototype._table,where:a,config:t.config}).then(function(e){return e}).catch(n.log);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h.json2obj=function(e,t){if(t=["database","http"].indexOf(t)>=0?t:"http","string"===typeof e)try{var r=JSON.parse(unescape(e));"http"===t?e=r:"database"===t&&("object"===typeof r&&null!==r?e=r:"boolean"===typeof r&&(e=r))}catch(a){}else if("object"===typeof e&&e&&!(e instanceof Date))for(var n in e)e[n]=arguments.callee(e[n],t);return h.iso2Date(e)},h.iso2Date=function(e){if("string"===typeof e)/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d\.\d\d\dZ$/.test(e)&&(e=new Date(e));else if("object"===typeof e&&e&&!(e instanceof Date))for(var t in e)e[t]=arguments.callee(e[t]);return e}}).call(this,r("c8ba"),r("5a52")["default"])},"4eaa":function(e,t,r){"use strict";var n=r("288e"),a=n(r("f499"));r("c5f6"),r("96cf");var s=n(r("3b8d")),i=r("9667"),o=r("4a21"),u=e.exports=function(e){this._class=this.constructor.name,this.setProp(e),this.type=this.constructor.name};u.__proto__=i;var c=u.prototype;c.__proto__=i.prototype,c.validateMe=function(){return this.actorPubkey&&this.toAddress&&o.pubkey2address(this.actorPubkey)!==this.toAddress&&this.amount&&this.amount>0&&this.fee>=0},c.executableMe=(0,s.default)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wo.Account.getBalance(this.actorAddress);case 2:return t=e.sent,e.abrupt("return",t>=this.amount+this.fee);case 4:case"end":return e.stop()}},e,this)})),c.executeMe=(0,s.default)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wo.Account.getOne({Account:{address:this.actorAddress}});case 2:if(t=e.sent,!(t&&"multisig"!==t.type&&this.toAddress!=this.actorAddress&&t.balance>=this.amount+this.fee)){e.next=18;break}return e.next=6,t.setMe({Account:{balance:Number(t.balance)-Number(this.amount)-Number(this.fee),countAction:t.countAction+1},cond:{address:t.address}});case 6:return e.next=8,wo.Account.getOne({Account:{address:this.toAddress}});case 8:if(e.t0=e.sent,e.t0){e.next=13;break}return e.next=12,wo.Account.addOne({Account:{address:this.toAddress}});case 12:e.t0=e.sent;case 13:return r=e.t0,e.next=16,r.setMe({Account:{balance:Number(r.balance)+Number(this.amount),countAction:r.countAction+1},cond:{address:r.address}});case 16:return mylog.info("Excecuted action="+(0,a.default)(this)),e.abrupt("return",this);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}},e,this)})),u.api={}},"5b82":function(e,t,r){"use strict";var n=r("288e");r("96cf");var a=n(r("3b8d")),s=r("9667"),i=e.exports=function(e){this._class=this.constructor.name,this.setProp(e),this.type=this.constructor.name};i.__proto__=s;var o=i.prototype;o.__proto__=s.prototype,o.validateMe=function(){return this.fee>=wo.Config.MIN_FEE_ActionStore||0},o.executableMe=(0,a.default)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wo.Store.getBalance(this.actorAddress);case 2:return t=e.sent,e.abrupt("return",t>=this.fee&&!0);case 4:case"end":return e.stop()}},e,this)})),o.executeMe=(0,a.default)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wo.Account.getOne({Account:{address:this.actorAddress}});case 2:if(t=e.sent,!(t&&t.balance>=this.fee)){e.next=7;break}return e.next=6,t.setMe({Account:{balance:t.balance-this.fee},cond:{address:t.address}});case 6:return e.abrupt("return",this);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)})),i.api={}},"69f3":function(e,t,r){"use strict";r.r(t);var n=r("298d"),a=r("f03b");for(var s in a)"default"!==s&&function(e){r.d(t,e,function(){return a[e]})}(s);r("97f3");var i,o=r("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"46857900",null,!1,n["a"],i);t["default"]=u.exports},9667:function(e,t,r){"use strict";var n=r("288e"),a=n(r("f499")),s=n(r("5176"));r("96cf");var i=n(r("3b8d")),o=r("1b83"),u=r("4a21"),c={},l=e.exports=function(e){this._class=this.constructor.name,this.setProp(e),this.type=this.constructor.name};l.__proto__=o;var d=l.prototype;d.__proto__=o.prototype,d._table=l.name,d._tablekey="hash",d._model={hash:{default:void 0,sqlite:"TEXT UNIQUE",mysql:"VARCHAR(64) PRIMARY KEY"},version:{default:0,sqlite:"INTEGER"},type:{default:"Action",sqlite:"TEXT",mysql:"VARCHAR(100)"},blockHash:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(64)"},timestamp:{default:void 0,sqlite:"TEXT",mysql:"CHAR(24)"},actorPubkey:{default:void 0,sqlite:"TEXT",mysql:"BINARY(32)"},actorAddress:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(50)"},actorSignature:{default:void 0,sqlite:"TEXT",mysql:"BINARY(64)"},toAddress:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(50)"},amount:{default:0,sqlite:"NUMERIC",mysql:"BIGINT"},fee:{default:0,sqlite:"NUMERIC",mysql:"BIGINT"},message:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(256)"},dataIndex:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(50)"},method:{default:void 0,sqlite:"TEXT"},json:{default:void 0,sqlite:"TEXT"}},d.packMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.actorPubkey=t.pubkey,this.actorAddress=u.pubkey2address(t.pubkey),this.timestamp=new Date,e.next=5,this.signMe(t.seckey);case 5:return this.hashMe(),e.abrupt("return",this);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d.signMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this.getJson({exclude:["hash","blockHash","actorSignature"]}),e.next=3,u.sign(r,t);case 3:return this.actorSignature=e.sent,e.abrupt("return",this);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d.hashMe=function(){return this.hash=u.hash(this.getJson({exclude:["hash","blockHash"]})),this},d.verifySig=(0,i.default)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getJson({exclude:["hash","blockHash","actorSignature"]}),e.next=3,u.verify(t,this.actorSignature,this.actorPubkey);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),l.verifySig=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new c[t.type](t),e.next=3,r.verifySig();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d.verifyAddress=function(){return this.actorAddress===u.pubkey2address(this.actorPubkey)},l.verifyAddress=function(e){var t=new c[e.type](e);return t.verifyAddress()},d.verifyHash=function(){return this.hash===u.hash(this.getJson({exclude:["hash","blockHash"]}))},l.verifyHash=function(e){var t=new c[e.type](e);return t.verifyHash()},d.validateMe=function(){var e=new c[this.type](this);return e.validateMe()},l.validate=function(e){mylog.info("Validating action type=".concat(e.type," of hash=").concat(e.hash));var t=new c[e.type](e);return t.validateMe()},d.executableMe=(0,i.default)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=new c[this.type](this),e.next=3,t.executableMe();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),l.executable=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=new c[t.type](t),!r.hasOwnProperty("executableMe")){e.next=7;break}return e.next=4,r.executableMe();case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d.executeMe=(0,i.default)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=new c[this.type](this),e.next=3,t.executeMe();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),l.execute=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return mylog.info("Excecuting action type=".concat(t.type," of hash=").concat(t.hash)),r=new c[t.type](t),e.next=4,r.executeMe();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l._initTypeDict=function(e){(0,s.default)(c,e)},l.getTypedAction=function(e){return c[e]},l.createTypedAction=function(e){return new c[e.type](e)},l.buildUserAction=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(t&&t.type&&r&&r.seckey&&r.pubkey&&u.seckey2pubkey(r.seckey)===r.pubkey)){e.next=7;break}if(n=new c[t.type](t),n.actorPubkey=r.pubkey,!n.validateMe()){e.next=7;break}return e.next=6,n.packMe(r);case 6:return e.abrupt("return",n);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),l.getActionBatch=function(){var e={actionPool:JSON.parse((0,a.default)(l.actionPool)),totalAmount:l.actionPoolInfo.totalAmount,totalFee:l.actionPoolInfo.totalFee};return l.actionPool={},l.actionPoolInfo={totalAmount:0,totalFee:0},e},l.api={},l.api.getAction=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.getOne(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l.api.getActionList=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.getAll(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l.api.getMyActionList=(0,i.default)(regeneratorRuntime.mark(function e(){var t,r,n,a,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.myAddress,n=t.config,a={},e.next=4,l.getAll({Action:{actorAddress:r},config:n});case 4:return a.fromMe=e.sent,e.next=7,l.getAll({Action:{toAddress:r},config:n});case 7:return a.toMe=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)})),l.api.prepare=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("string"===typeof t)try{t=JSON.parse(t)}catch(n){}if(!(t&&t.Action&&t.Action.type&&c[t.Action.type]&&t.Action.hash)||l.actionPool[t.Action.hash]){e.next=24;break}if(r=new c[t.Action.type](t.Action),e.t3=r.verifyAddress(),!e.t3){e.next=8;break}return e.next=7,r.verifySig();case 7:e.t3=e.sent;case 8:if(e.t2=e.t3,!e.t2){e.next=11;break}e.t2=r.verifyHash();case 11:if(e.t1=e.t2,!e.t1){e.next=14;break}e.t1=r.validateMe();case 14:if(e.t0=e.t1,!e.t0){e.next=19;break}return e.next=18,r.executableMe();case 18:e.t0=e.sent;case 19:if(!e.t0){e.next=24;break}return l.actionPool[t.Action.hash]=r,l.actionPoolInfo.totalAmount+=t.Action.amount||0,l.actionPoolInfo.totalFee+=t.Action.fee||0,e.abrupt("return",t.Action);case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l.actionPool={},l.actionPoolInfo={totalAmount:0,totalFee:0}},"97f3":function(e,t,r){"use strict";var n=r("feb2"),a=r.n(n);a.a},a771:function(e,t,r){"use strict";var n=r("288e"),a=n(r("5d73")),s=n(r("a4bb"));r("96cf");var i=n(r("3b8d")),o=r("9667"),u=e.exports=function(e){this._class=this.constructor.name,this.setProp(e),this.type=this.constructor.name};u.__proto__=o;var c=u.prototype;c.__proto__=o.prototype,c.signMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this.getJson({exclude:["hash","blockHash","actorSignature","json"]}),e.next=3,wo.Crypto.sign(r,t);case 3:return this.actorSignature=e.sent,e.abrupt("return",this);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c.verifySig=(0,i.default)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getJson({exclude:["hash","blockHash","actorSignature","json"]}),e.next=3,wo.Crypto.verify(t,this.actorSignature,this.actorPubkey);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),c.verifyAddress=function(){return this.actorAddress===wo.Crypto.pubkey2address(this.actorPubkey)},c.hashMe=function(){return this.hash=wo.Crypto.hash(this.getJson({exclude:["hash","blockHash","json"]})),this},c.verifyHash=function(){return this.hash===wo.Crypto.hash(this.getJson({exclude:["hash","blockHash","json"]}))},c.packMe=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.actorPubkey=t.pubkey,this.actorAddress=wo.Crypto.pubkey2address(t.pubkey),this.timestamp=new Date,e.next=5,this.signMe(t.seckey);case 5:return this.hashMe(),e.abrupt("return",this);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c.checkMultiSig=function(){var e=(0,i.default)(regeneratorRuntime.mark(function e(t){var r,n,i,o,u,c,l,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=this.getJson({exclude:["hash","blockHash","actorSignature","json"]}),n=(0,s.default)(this.json),-1===t.multiSignatures.keysgroup.indexOf(this.actorPubkey)?1:0,i=!0,o=!1,u=void 0,e.prev=6,c=(0,a.default)(n);case 8:if(i=(l=c.next()).done){e.next=20;break}if(d=l.value,e.t0=-1!==t.multiSignatures.keysgroup.indexOf(d),!e.t0){e.next=15;break}return e.next=14,wo.Crypto.verify(r,this.json[d],d);case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=17;break}M++;case 17:i=!0,e.next=8;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e["catch"](6),o=!0,u=e.t1;case 26:e.prev=26,e.prev=27,i||null==c.return||c.return();case 29:if(e.prev=29,!o){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",M>=t.multiSignatures.min);case 35:case"end":return e.stop()}},e,this,[[6,22,26,34],[27,,29,33]])}));return function(t){return e.apply(this,arguments)}}(),c.validateMe=(0,i.default)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",wo.Crypto.isAddress(this.toAddress)&&this.fee>=wo.Config.MIN_FEE_ActionTransfer&&this.toAddress!=this.actorAddress);case 1:case"end":return e.stop()}},e,this)})),c.executableMe=(0,i.default)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("createTransfer"!==this.json.act){e.next=5;break}return u.pendingPool[this.hash]=this,e.abrupt("return",!1);case 5:if("addSig"!==this.json.act){e.next=8;break}return u.pendingPool[this.hash].json[this.actorPubkey]=this.json.signature,e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)})),c.executeMe=(0,i.default)(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.json.act,e.next="sign"===e.t0?3:"emitTransfer"===e.t0?10:40;break;case 3:return e.next=5,wo.Account.getOne({Account:{address:this.actorAddress}});case 5:if(t=e.sent,!t||"multisig"===t.type){e.next=9;break}return e.next=9,t.setMe({Account:{multiSignatures:{min:this.json.min,ttl:this.json.ttl,keysgroup:this.json.keysgroup}},cond:{address:t.address}});case 9:return e.abrupt("return",this);case 10:return e.next=12,wo.Account.getOne({Account:{address:this.actorAddress}});case 12:if(r=e.sent,e.t3=r,!e.t3){e.next=18;break}return e.next=17,this.checkMultiSig(r);case 17:e.t3=e.sent;case 18:if(e.t2=e.t3,!e.t2){e.next=21;break}e.t2=this.toAddress!=this.actorAddress;case 21:if(e.t1=e.t2,!e.t1){e.next=24;break}e.t1=r.balance>=this.amount+this.fee;case 24:if(!e.t1){e.next=39;break}return e.next=27,r.setMe({Account:{balance:r.balance-this.amount-this.fee},cond:{address:r.address}});case 27:return e.next=29,wo.Account.getOne({Account:{address:this.toAddress}});case 29:if(n=e.sent,!n){e.next=35;break}return e.next=33,n.setMe({Account:{balance:n.balance+this.amount},cond:{address:n.address}});case 33:e.next=37;break;case 35:return e.next=37,wo.Account.addOne({Account:{address:this.toAddress}});case 37:return delete u.pendingPool[this.hash],e.abrupt("return",this);case 39:return e.abrupt("return",null);case 40:case"end":return e.stop()}},e,this)})),u.pendingPool={},u.api={},u.api.pendingAction=function(e){return u.pendingPool[e.id]}},cf10:function(e,t,r){},dbda:function(e,t,r){"use strict";(function(e){var n=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("768b"));r("c5f6"),r("96cf");var s=n(r("3b8d")),i=n(r("15b8")),o=n(r("9667")),u=n(r("fc19"));o.default._initTypeDict(u.default);var c={data:function(){return{i18nText:(0,i.default)({zhCN:{tPageTitle:"转出"},enUS:{tPageTitle:"Transfer"}}),ownerSecword:"",toAddress:"",amount:""}},computed:{localeText:function(){return this.i18nText[this._SS.i18n.activeLang]}},onLoad:function(){},onShow:function(){uni.setNavigationBarTitle({title:this.localeText.tPageTitle}),this._SC("i18n/setTabbar")},methods:{test:function(){this.toAddress="TPkXknZFGzOFilzRTOCJCf05dNXl4EQy",this.ownerSecword="brand moment media marine enroll verb blanket toilet unit exercise choose nuclear",this.amount=100},transfer:function(){var t=(0,s.default)(regeneratorRuntime.mark(function t(){var r,n,s,i,u,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!1,this._TIC.isAddress(this.toAddress)){t.next=5;break}uni.showToast({image:"../static/Common.fail.png",title:"对方地址格式错误"}),t.next=38;break;case 5:if(this._SS.ownerAddress!==this.toAddress){t.next=9;break}uni.showToast({image:"../static/Common.fail.png",title:"不能转账给自己"}),t.next=38;break;case 9:if(!(this.amount>this._SS.ownerBalance)){t.next=13;break}uni.showToast({image:"../static/Common.fail.png",title:"转账金额超出了您的账户余额"}),t.next=38;break;case 13:if(this._TIC.isSecword(this.ownerSecword)){t.next=17;break}uni.showToast({image:"../static/Common.fail.png",title:"密语格式错误"}),t.next=38;break;case 17:if(this._TIC.secword2address(this.ownerSecword)===this._SS.ownerAddress){t.next=21;break}uni.showToast({image:"../static/Common.fail.png",title:"密语不符合当前登录账号"}),t.next=38;break;case 21:return r=this._TIC.secword2account(this.ownerSecword),t.next=24,o.default.buildUserAction({type:"ActionTransfer",amount:Number(this.amount),toAddress:this.toAddress},r);case 24:if(n=t.sent,!n){t.next=38;break}return e.log("action by client = ",n),uni.showLoading({title:"正在提交转账申请..."}),t.next=30,this.uni2log.request({url:"api/Action/prepare",data:{Action:n}});case 30:s=t.sent,i=(0,a.default)(s,2),i[0],u=i[1],u=void 0===u?{}:u,c=u.data,u.statusCode,u.header,uni.hideLoading(),c&&"ActionTransfer"===c.type?(e.log("action from server = ",c),uni.showToast({image:"../static/Common.success.png",title:"转账申请已成功提交"})):uni.showToast({image:"../static/Common.fail.png",title:"转账申请提交失败"});case 38:case"end":return t.stop()}},t,this)}));function r(){return t.apply(this,arguments)}return r}()}};t.default=c}).call(this,r("5a52")["default"])},de9c:function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/******* LOG 私有定义 ************/.sBody[data-v-46857900]{padding-left:4%;padding-right:4%\n\n}@media screen and (min-width:751px){.sBody[data-v-46857900]{width:720px}}.sBody .sViewField[data-v-46857900]{background:#555;color:#fff;margin-bottom:%?40?%;padding:%?10?%;font-size:large\n\n}@media screen and (min-width:751px){.sBody .sViewField[data-v-46857900]{padding:10px;margin-bottom:30px}}.sBody .sInputField[data-v-46857900]{padding:%?9?%;color:#333;background:#eee;margin-bottom:%?40?%;box-sizing:border-box\n\n}@media screen and (min-width:751px){.sBody .sInputField[data-v-46857900]{padding:9px;margin-bottom:40px}}.sBody .sLabel[data-v-46857900]{color:#fff;font-size:small;padding-bottom:6px}.sBody .sSecwordTextarea[data-v-46857900]{width:100%}.sBody .sSecwordTextarea .uni-textarea-compute[data-v-46857900],.sBody .sSecwordTextarea uni-textarea[data-v-46857900]{word-break:normal}',""])},f03b:function(e,t,r){"use strict";r.r(t);var n=r("dbda"),a=r.n(n);for(var s in n)"default"!==s&&function(e){r.d(t,e,function(){return n[e]})}(s);t["default"]=a.a},fc19:function(e,t,r){"use strict";var n=r("4eaa"),a=r("5b82"),s=r("a771"),i=r("cf10");e.exports={ActionTransfer:n,ActionStore:a,ActionMultisig:s,ActionLockProof:i}},feb2:function(e,t,r){var n=r("de9c");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("c124f74c",n,!0,{sourceMap:!1,shadowMode:!1})}}]);