(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-AccountTransfer"],{"1b83":function(t,e,n){t.exports=n("2bb9")},"2bb9":function(t,e,n){(function(e,s){const a=n("11c1"),i=e.mylog||s,o=t.exports=function(){this._class=this.constructor.name},r=o.prototype;r.setProp=function(t){for(var e in t=t||{},this._model)if(t.hasOwnProperty(e)&&"undefined"!==typeof t[e]&&t[e]===t[e]&&t[e]!==1/0)this[e]=t[e];else if("undefined"===typeof this[e]){let t=this._model[e].default;this[e]=t&&"object"===typeof t?JSON.parse(JSON.stringify(t)):t}return this},r.getProp=function(t){t=t||{};let e={};for(var n of Object.keys(this._model).sort())"undefined"!==typeof t[n]&&t[n]===t[n]&&t[n]!==1/0?e[n]=t[n]:"undefined"!==typeof this[n]&&this[n]===this[n]&&this[n]!==1/0&&(e[n]=this[n]);return e},r.filterProp=function(t){for(var e in t=t||{},t)this._model.hasOwnProperty(e)&&"undefined"!==typeof t[e]&&t[e]===t[e]&&t[e]!==1/0||delete t[e];return t},r.getJson=function(t={}){let e=this.getProp();for(let s of t.exclude||[])delete e[s];let n=JSON.stringify(e);return n},r.normalize=async function(){return e.solet&&this.hasOwnProperty("ownerSid")&&(this._data=this._data||{},this._data.owner=await this.getOwner()),this},r.getOwner=async function(){return e.solet&&this.hasOwnProperty("ownerSid")?this.ownerSid?await wo.Person.getOne({Person:{aiid:this.ownerSid}}):wo.Config.PERSON_UNKNOWN:null},r._eventPool=null,r.addWatcher=function(t,e){null==this._eventPool&&(this._eventPool={}),"undefined"==typeof this._eventPool[t]&&(this._eventPool[t]=[]),this._eventPool[t].push(e)},r.dropWatcher=function(t,e){if(null!=this._eventPool&&this._eventPool[t]instanceof Array){let n=this._eventPool[t];for(let t in n)if(n[t]===e){n.splice(t,1);break}}},r.dropWatcherAll=function(t){null!=this._eventPool&&(this._eventPool[t]=void 0)},r.triggerEvent=function(t,e,n){let s={type:t,target:this};if(null!=this._eventPool&&this._eventPool[s.type]instanceof Array){let t=this._eventPool[s.type];for(let a in t)t[a](s,e,n)}},r.getMe=async function(t){let n,a=this;return t=t||{},n=t.excludeSelf?a.filterProp(t[a._class]):a.getProp(t[a._class]),e.solet&&(delete n.whenInserted,delete n.whenUpdated),"object"===typeof n&&n&&Object.keys(n).length>0?(e.solet&&this.hasOwnProperty("mark")&&(n.mark="!="+wo.Config.MARK_DELETED),t.config=t.config||{},t.config.limit=1,await this._database.getData({_table:this._table,where:n,config:t.config}).then((function(t){return Array.isArray(t)&&t[0]?(a.setProp(t[0]),a):null})).catch(s.log)):null},r.setMe=async function(t){let n,a=this;t=t||{},n=t.excludeSelf?a.filterProp(t[a._class]):a.getProp(t[a._class]),e.solet&&(delete n.aiid,delete n.uuid,"mysql"===wo.Config.dbType?(delete n.whenInserted,delete n.whenUpdated):"sqlite"===wo.Config.dbType&&this.hasOwnProperty("whenUpdated")&&(delete n.whenInserted,n.whenUpdated=new Date));let i={};if(t.cond)i=a.filterProp(t.cond);else if(t[a._class]&&t[a._class][a._tablekey])i[a._tablekey]=t[a._class][a._tablekey];else{if(!a[a._tablekey])return null;i[a._tablekey]=a[a._tablekey]}return"object"===typeof i&&i&&Object.keys(i).length>0&&"object"===typeof n&&n&&Object.keys(n).length>0?(e.solet&&this.hasOwnProperty("mark")&&(i.mark="!="+wo.Config.MARK_DELETED),await this._database.setData({_table:this._table,where:i,set:n,config:{limit:1}}).then((function(t){return Array.isArray(t)&&t[0]?(a.setProp(t[0]),a):null})).catch(s.log)):null},r.addMe=async function(t){let n,i=this;return t=t||{},n=t.excludeSelf?i.filterProp(t[i._class]):i.getProp(t[i._class]),e.solet&&("mysql"===wo.Config.dbType?(delete n.whenInserted,delete n.whenUpdated):"sqlite"===wo.Config.dbType&&this.hasOwnProperty("whenInserted")&&(n.whenUpdated=n.whenInserted=new Date)),this.hasOwnProperty("uuid")&&!n.uuid&&(n.uuid=`${i._class}-${a.v4()}`),await this._database.addData({_table:this._table,set:n,config:{limit:1}}).then((function(t){return Array.isArray(t)&&t[0]?(i.setProp(t[0]),i):null})).catch(s.log)},r.hideMe=async function(t){let e=this;t=t||{};let n={};return t.excludeSelf?n=e.filterProp(t[e._class]):t[e._class]&&t[e._class][e._tablekey]?n[e._tablekey]=t[e._class][e._tablekey]:this[e._tablekey]?n[e._tablekey]=this[e._tablekey]:n=e.getProp(t[e._class]),"object"===typeof n&&n&&Object.keys(n).length>0&&e.hasOwnProperty("mark")?await this._database.setData({_table:this._table,where:n,set:{mark:wo.Config.MARK_DELETED},config:{limit:1}}).then((function(t){return Array.isArray(t)&&t[0]?(e.setProp(t[0]),e):null})).catch(s.log):null},r.dropMe=async function(t){let e=this;t=t||{};let n={};return t.excludeSelf?n=e.filterProp(t[e._class]):t[e._class]&&t[e._class][e._tablekey]?n[e._tablekey]=t[e._class][e._tablekey]:this[e._tablekey]?n[e._tablekey]=this[e._tablekey]:n=e.getProp(t[e._class]),"object"===typeof n&&n&&Object.keys(n).length>0?await this._database.dropData({_table:this._table,where:n,config:{limit:1}}).then((function(t){return t})).catch(s.log):null},o._init=async function(t){return this.prototype._database=t,await this.createTable(),this},o.createTable=async function(){i.info("Creating table "+this.prototype._table);await this.prototype._database.createTable({_table:this.prototype._table,_model:this.prototype._model});return i.info("******* Table is ready: "+this.prototype._table),this},o.getCount=async function(t){t=t||{},e.solet&&(t[this.name]=t[this.name]||{},t[this.name].starId=t[this.name].starId||t.starId);let n=this.prototype.filterProp(t[this.name]);return e.solet&&this.prototype._model["mark"]&&(n.mark="!="+wo.Config.MARK_DELETED),await this.prototype._database.getNumber({_table:this.prototype._table,where:n,field:"*",func:"count"}).then((function(t){return t})).catch(s.log)},o.getSum=async function(t){if(t=t||{},t.field){let e=this.prototype.filterProp(t[this.name]);return await this.prototype._database.getNumber({_table:this.prototype._table,where:e,field:t.field,func:"sum"}).then((function(t){return t})).catch(s.log)}return null},o.getAllCall=async function(t){let e=this;return t._proc?await this.prototype._database.callProc(t).then((function(t){if(Array.isArray(t)){for(let n of t)n.__proto__=e.prototype,n._class=e.name;return t}return[]})).catch(s.log):[]},o.getAll=async function(t){t=t||{};let n=this;e.solet&&(t[this.name]=t[this.name]||{},t[this.name].starId=t[this.name].starId||t.starId);let a=n.prototype.filterProp(t[n.name]);return e.solet&&this.prototype._model["mark"]&&(a.mark="!="+wo.Config.MARK_DELETED),await this.prototype._database.getData({_table:this.prototype._table,where:a,config:t.config}).then((function(t){if(Array.isArray(t)){for(let e of t)e.__proto__=n.prototype,e._class=n.name;return t}return[]})).catch(s.log)},o.getOne=async function(t){return t&&"object"===typeof t[this.name]?(e.solet&&(t[this.name].starId=t[this.name].starId||t.starId),t.excludeSelf=!0,await(new this).getMe(t)):null},o.setOne=async function(t){return t&&"object"===typeof t[this.name]?(e.solet&&(t.cond&&"object"===typeof t.cond?t.cond.starId=t.cond.starId||t.starId:"Person"===this.name&&t[this.name].aiid===t._passtoken.onlineSid?t.cond={aiid:t._passtoken.onlineSid}:"Person"!==this.name&&t[this.name].aiid&&(t.cond={aiid:t[this.name].aiid,ownerSid:t._passtoken.onlineSid,starId:t.starId})),t.cond&&"object"===typeof t.cond&&(t.excludeSelf=!0),await(new this).setMe(t)):null},o.addOne=async function(t){return t&&"object"===typeof t[this.name]?(e.solet&&(t[this.name].ownerSid=t._passtoken.onlineSid,t[this.name].starId=t[this.name].starId||t.starId),await(new this).addMe(t)):null},o.hideOne=async function(t){return e.solet&&t._passtoken.isOnline()&&"object"===typeof t[this.name]&&"Person"!==this.name&&t[this.name].aiid?(t[this.name]={aiid:t[this.name].aiid,ownerSid:t._passtoken.onlineSid,starId:t.starId},await(new this).hideMe(t)):null},o.dropOne=async function(t){return t&&"object"===typeof t[this.name]?await(new this).dropMe(t):null},o.dropAll=async function(t){let e=this;t=t||{};let n=e.prototype.filterProp(t[e.name]);return"object"===typeof n&&n&&Object.keys(n).length>0?await this.prototype._database.dropData({_table:this.prototype._table,where:n,config:t.config}).then((function(t){return t})).catch(s.log):null},o.json2obj=function(t,e){if(e=["database","http"].indexOf(e)>=0?e:"http","string"===typeof t)try{var n=JSON.parse(unescape(t));"http"===e?t=n:"database"===e&&("object"===typeof n&&null!==n?t=n:"boolean"===typeof n&&(t=n))}catch(s){}else if("object"===typeof t&&t&&!(t instanceof Date))for(let a in t)t[a]=arguments.callee(t[a],e);return o.iso2Date(t)},o.iso2Date=function(t){if("string"===typeof t)/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d\.\d\d\dZ$/.test(t)&&(t=new Date(t));else if("object"===typeof t&&t&&!(t instanceof Date))for(var e in t)t[e]=arguments.callee(t[e]);return t}}).call(this,n("c8ba"),n("5a52")["default"])},"3b53":function(t,e,n){var s=n("24fb");e=s(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/******* LOG 私有定义 ************/.sBody[data-v-7274fc74]{padding-left:4%;padding-right:4%\n\n}@media screen and (min-width:751px){.sBody[data-v-7274fc74]{width:720px}}.sBody .sViewField[data-v-7274fc74]{background:#555;color:#fff;margin-bottom:%?40?%;padding:%?10?%;font-size:large\n\n}@media screen and (min-width:751px){.sBody .sViewField[data-v-7274fc74]{padding:10px;margin-bottom:30px}}.sBody .sInputField[data-v-7274fc74]{padding:%?9?%;color:#333;background:#eee;margin-bottom:%?40?%;box-sizing:border-box\n\n}@media screen and (min-width:751px){.sBody .sInputField[data-v-7274fc74]{padding:9px;margin-bottom:40px}}.sBody .sLabel[data-v-7274fc74]{color:#fff;font-size:small;padding-bottom:6px}.sBody .sSecwordTextarea[data-v-7274fc74]{width:100%}.sBody .sSecwordTextarea uni-textarea[data-v-7274fc74], .sBody .sSecwordTextarea .uni-textarea-compute[data-v-7274fc74]{word-break:normal}',""]),t.exports=e},"5fba":function(t,e,n){const s=n("77b1"),a=t.exports=function(t){this._class=this.constructor.name,this.setProp(t),this.type=this.constructor.name};a.__proto__=s;const i=a.prototype;i.__proto__=s.prototype,i.validateMe=function(){return this.fee>=wo.Config.MIN_FEE_ActionStore||0},i.executableMe=async function(){let t=await wo.Store.getBalance(this.actorAddress);return t>=this.fee&&!0},i.executeMe=async function(){let t=await wo.Account.getOne({Account:{address:this.actorAddress}});return t&&t.balance>=this.fee?(await t.setMe({Account:{balance:t.balance-this.fee},cond:{address:t.address}}),this):null},a.api={}},"69f3":function(t,e,n){"use strict";n.r(e);var s=n("71d5"),a=n("f03b");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("88ba");var o,r=n("f0c5"),c=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,"7274fc74",null,!1,s["a"],o);e["default"]=c.exports},7095:function(t,e,n){var s=n("3b53");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var a=n("4f06").default;a("24d4187e",s,!0,{sourceMap:!1,shadowMode:!1})},"71d5":function(t,e,n){"use strict";var s,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"sPage"},[n("v-uni-view",{staticClass:"sBody"},[n("v-uni-view",{staticClass:"sContent"},[n("v-uni-view",{staticClass:"sViewField"},[t._v("我的账号 "+t._s(t._SS.ownerAddress))]),n("v-uni-view",{staticClass:"sViewField"},[t._v("当前余额 "+t._s(t._SS.ownerBalance))]),n("v-uni-view",{staticClass:"sLabel"},[t._v("对方地址")]),n("v-uni-view",{staticClass:"sInputField"},[n("v-uni-input",{staticClass:"sAddress",attrs:{type:"text",placeholder:"输入对方地址"},model:{value:t.toAddress,callback:function(e){t.toAddress=e},expression:"toAddress"}})],1),n("v-uni-view",{staticClass:"sLabel"},[t._v("转账金额")]),n("v-uni-view",{staticClass:"sInputField"},[n("v-uni-input",{staticClass:"sAmount",attrs:{type:"number",placeholder:"输入转账金额"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),n("v-uni-view",{staticClass:"sLabel"},[t._v("加密签名")]),n("v-uni-view",{staticClass:"sInputField"},[n("v-uni-textarea",{staticClass:"sSecwordTextarea",attrs:{"auto-height":"true",focus:"true",maxlength:"-1",placeholder:"输入您当前登录账号的密语"},model:{value:t.ownerSecword,callback:function(e){t.ownerSecword=e},expression:"ownerSecword"}})],1),n("v-uni-view",{staticClass:"sFooterFloating"},[n("v-uni-button",{staticClass:"sSubmitButton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.transfer.apply(void 0,arguments)}}},[t._v("转 账")])],1),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.test.apply(void 0,arguments)}}},[t._v("填入测试数据")])],1)],1)],1)},i=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s}))},"76ba":function(t,e,n){const s=n("a262"),a=n("5fba"),i=n("881a"),o=n("8577");t.exports={ActionTransfer:s,ActionStore:a,ActionMultisig:i,ActionLockProof:o}},"77b1":function(t,e,n){const s=n("1b83"),a=n("4a21"),i={},o=t.exports=function(t){this._class=this.constructor.name,this.setProp(t),this.type=this.constructor.name};o.__proto__=s;const r=o.prototype;r.__proto__=s.prototype,r._table=o.name,r._tablekey="hash",r._model={hash:{default:void 0,sqlite:"TEXT UNIQUE",mysql:"VARCHAR(64) PRIMARY KEY"},version:{default:0,sqlite:"INTEGER"},type:{default:"Action",sqlite:"TEXT",mysql:"VARCHAR(100)"},blockHash:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(64)"},timestamp:{default:void 0,sqlite:"TEXT",mysql:"CHAR(24)"},actorPubkey:{default:void 0,sqlite:"TEXT",mysql:"BINARY(32)"},actorAddress:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(50)"},actorSignature:{default:void 0,sqlite:"TEXT",mysql:"BINARY(64)"},toAddress:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(50)"},amount:{default:0,sqlite:"NUMERIC",mysql:"BIGINT"},fee:{default:0,sqlite:"NUMERIC",mysql:"BIGINT"},message:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(256)"},dataIndex:{default:void 0,sqlite:"TEXT",mysql:"VARCHAR(50)"},method:{default:void 0,sqlite:"TEXT"},json:{default:void 0,sqlite:"TEXT"}},r.packMe=async function(t){return this.actorPubkey=t.pubkey,this.actorAddress=a.pubkey2address(t.pubkey),this.timestamp=new Date,await this.signMe(t.seckey),this.hashMe(),this},r.signMe=async function(t){let e=this.getJson({exclude:["hash","blockHash","actorSignature"]});return this.actorSignature=await a.sign(e,t),this},r.hashMe=function(){return this.hash=a.hash(this.getJson({exclude:["hash","blockHash"]})),this},r.verifySig=async function(){let t=this.getJson({exclude:["hash","blockHash","actorSignature"]}),e=await a.verify(t,this.actorSignature,this.actorPubkey);return e},o.verifySig=async function(t){let e=new i[t.type](t);return await e.verifySig()},r.verifyAddress=function(){return this.actorAddress===a.pubkey2address(this.actorPubkey)},o.verifyAddress=function(t){let e=new i[t.type](t);return e.verifyAddress()},r.verifyHash=function(){return this.hash===a.hash(this.getJson({exclude:["hash","blockHash"]}))},o.verifyHash=function(t){let e=new i[t.type](t);return e.verifyHash()},r.validateMe=function(){let t=new i[this.type](this);return t.validateMe()},o.validate=function(t){mylog.info(`Validating action type=${t.type} of hash=${t.hash}`);let e=new i[t.type](t);return e.validateMe()},r.executableMe=async function(){let t=new i[this.type](this);return await t.executableMe()},o.executable=async function(t){let e=new i[t.type](t);return!e.hasOwnProperty("executableMe")||await e.executableMe()},r.executeMe=async function(){let t=new i[this.type](this);return await t.executeMe()},o.execute=async function(t){mylog.info(`Excecuting action type=${t.type} of hash=${t.hash}`);let e=new i[t.type](t);return await e.executeMe()},o._initTypeDict=function(t){Object.assign(i,t)},o.getTypedAction=function(t){return i[t]},o.createTypedAction=function(t){return new i[t.type](t)},o.buildUserAction=async function(t,e){if(t&&t.type&&e&&e.seckey&&e.pubkey&&a.seckey2pubkey(e.seckey)===e.pubkey){let n=new i[t.type](t);if(n.actorPubkey=e.pubkey,n.validateMe())return await n.packMe(e),n}return null},o.getActionBatch=function(){let t={actionPool:JSON.parse(JSON.stringify(o.actionPool)),totalAmount:o.actionPoolInfo.totalAmount,totalFee:o.actionPoolInfo.totalFee};return o.actionPool={},o.actionPoolInfo={totalAmount:0,totalFee:0},t},o.api={},o.api.getAction=async function(t){return await o.getOne(t)},o.api.getActionList=async function(t){return await o.getAll(t)},o.api.getMyActionList=async function({myAddress:t,config:e}={}){let n={};return n.fromMe=await o.getAll({Action:{actorAddress:t},config:e}),n.toMe=await o.getAll({Action:{toAddress:t},config:e}),n},o.api.prepare=async function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}if(t&&t.Action&&t.Action.type&&i[t.Action.type]&&t.Action.hash&&!o.actionPool[t.Action.hash]){let e=new i[t.Action.type](t.Action);if(e.verifyAddress()&&await e.verifySig()&&e.verifyHash()&&e.validateMe()&&await e.executableMe())return o.actionPool[t.Action.hash]=e,o.actionPoolInfo.totalAmount+=t.Action.amount||0,o.actionPoolInfo.totalFee+=t.Action.fee||0,t.Action}return null},o.actionPool={},o.actionPoolInfo={totalAmount:0,totalFee:0}},8577:function(t,e,n){},"881a":function(t,e,n){const s=n("77b1"),a=t.exports=function(t){this._class=this.constructor.name,this.setProp(t),this.type=this.constructor.name};a.__proto__=s;const i=a.prototype;i.__proto__=s.prototype,i.signMe=async function(t){let e=this.getJson({exclude:["hash","blockHash","actorSignature","json"]});return this.actorSignature=await wo.Crypto.sign(e,t),this},i.verifySig=async function(){let t=this.getJson({exclude:["hash","blockHash","actorSignature","json"]}),e=await wo.Crypto.verify(t,this.actorSignature,this.actorPubkey);return e},i.verifyAddress=function(){return this.actorAddress===wo.Crypto.pubkey2address(this.actorPubkey)},i.hashMe=function(){return this.hash=wo.Crypto.hash(this.getJson({exclude:["hash","blockHash","json"]})),this},i.verifyHash=function(){return this.hash===wo.Crypto.hash(this.getJson({exclude:["hash","blockHash","json"]}))},i.packMe=async function(t){return this.actorPubkey=t.pubkey,this.actorAddress=wo.Crypto.pubkey2address(t.pubkey),this.timestamp=new Date,await this.signMe(t.seckey),this.hashMe(),this},i.checkMultiSig=async function(t){let e=this.getJson({exclude:["hash","blockHash","actorSignature","json"]}),n=Object.keys(this.json);if(-1===t.multiSignatures.keysgroup.indexOf(this.actorPubkey)){}else{}for(let s of n)-1!==t.multiSignatures.keysgroup.indexOf(s)&&await wo.Crypto.verify(e,this.json[s],s)&&M++;return M>=t.multiSignatures.min},i.validateMe=async function(){return wo.Crypto.isAddress(this.toAddress)&&this.fee>=wo.Config.MIN_FEE_ActionTransfer&&this.toAddress!=this.actorAddress},i.executableMe=async function(){return"createTransfer"===this.json.act?(a.pendingPool[this.hash]=this,!1):"addSig"!==this.json.act||(a.pendingPool[this.hash].json[this.actorPubkey]=this.json.signature,!1)},i.executeMe=async function(){switch(this.json.act){case"sign":{let t=await wo.Account.getOne({Account:{address:this.actorAddress}});return t&&"multisig"!==t.type&&await t.setMe({Account:{multiSignatures:{min:this.json.min,ttl:this.json.ttl,keysgroup:this.json.keysgroup}},cond:{address:t.address}}),this}case"emitTransfer":{let t=await wo.Account.getOne({Account:{address:this.actorAddress}});if(t&&await this.checkMultiSig(t)&&this.toAddress!=this.actorAddress&&t.balance>=this.amount+this.fee){await t.setMe({Account:{balance:t.balance-this.amount-this.fee},cond:{address:t.address}});let e=await wo.Account.getOne({Account:{address:this.toAddress}});return e?await e.setMe({Account:{balance:e.balance+this.amount},cond:{address:e.address}}):await wo.Account.addOne({Account:{address:this.toAddress}}),delete a.pendingPool[this.hash],this}return null}}},a.pendingPool={},a.api={},a.api.pendingAction=function(t){return a.pendingPool[t.id]}},"88ba":function(t,e,n){"use strict";var s=n("7095"),a=n.n(s);a.a},a262:function(t,e,n){const s=n("77b1"),a=n("4a21"),i=t.exports=function(t){this._class=this.constructor.name,this.setProp(t),this.type=this.constructor.name};i.__proto__=s;const o=i.prototype;o.__proto__=s.prototype,o.validateMe=function(){return this.actorPubkey&&this.toAddress&&a.pubkey2address(this.actorPubkey)!==this.toAddress&&this.amount&&this.amount>0&&this.fee>=0},o.executableMe=async function(){let t=await wo.Account.getBalance(this.actorAddress);return t>=this.amount+this.fee},o.executeMe=async function(){let t=await wo.Account.getOne({Account:{address:this.actorAddress}});if(t&&"multisig"!==t.type&&this.toAddress!=this.actorAddress&&t.balance>=this.amount+this.fee){await t.setMe({Account:{balance:Number(t.balance)-Number(this.amount)-Number(this.fee),countAction:t.countAction+1},cond:{address:t.address}});let e=await wo.Account.getOne({Account:{address:this.toAddress}})||await wo.Account.addOne({Account:{address:this.toAddress}});return await e.setMe({Account:{balance:Number(e.balance)+Number(this.amount),countAction:e.countAction+1},cond:{address:e.address}}),mylog.info("Excecuted action="+JSON.stringify(this)),this}return null},i.api={}},dbda:function(t,e,n){"use strict";(function(t){var s=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("768b"));n("c5f6"),n("96cf");var i=s(n("3b8d"));n("0d6d");var o=s(n("4a21")),r=s(n("77b1")),c=s(n("76ba"));r.default._initTypeDict(c.default);var l={data:function(){return{i18nText:Object.freeze({zhCN:{tPageTitle:"转出"},enUS:{tPageTitle:"Transfer"}}),ownerSecword:"",toAddress:"",amount:""}},computed:{localeText:function(){return this.i18nText[this._SS.i18n.activeLang]}},onLoad:function(){},onShow:function(){uni.setNavigationBarTitle({title:this.localeText.tPageTitle}),this._SC("i18n/setTabbar")},methods:{test:function(){this.toAddress="TPkXknZFGzOFilzRTOCJCf05dNXl4EQy",this.ownerSecword="brand moment media marine enroll verb blanket toilet unit exercise choose nuclear",this.amount=100},transfer:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(){var n,s,i,c,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1,o.default.isAddress(this.toAddress)){e.next=5;break}uni.showToast({image:"../static/Common.fail.png",title:"对方地址格式错误"}),e.next=38;break;case 5:if(this._SS.ownerAddress!==this.toAddress){e.next=9;break}uni.showToast({image:"../static/Common.fail.png",title:"不能转账给自己"}),e.next=38;break;case 9:if(!(this.amount>this._SS.ownerBalance)){e.next=13;break}uni.showToast({image:"../static/Common.fail.png",title:"转账金额超出了您的账户余额"}),e.next=38;break;case 13:if(o.default.isSecword(this.ownerSecword)){e.next=17;break}uni.showToast({image:"../static/Common.fail.png",title:"密语格式错误"}),e.next=38;break;case 17:if(o.default.secword2address(this.ownerSecword)===this._SS.ownerAddress){e.next=21;break}uni.showToast({image:"../static/Common.fail.png",title:"密语不符合当前登录账号"}),e.next=38;break;case 21:return n=o.default.secword2account(this.ownerSecword),e.next=24,r.default.buildUserAction({type:"ActionTransfer",amount:Number(this.amount),toAddress:this.toAddress},n);case 24:if(s=e.sent,!s){e.next=38;break}return t.log("action by client = ",s),uni.showLoading({title:"正在提交转账申请..."}),e.next=30,this.uni2log.request({url:"api/Action/prepare",data:{Action:s}});case 30:i=e.sent,c=(0,a.default)(i,2),c[0],l=c[1],l=void 0===l?{}:l,d=l.data,l.statusCode,l.header,uni.hideLoading(),d&&"ActionTransfer"===d.type?(t.log("action from server = ",d),uni.showToast({image:"../static/Common.success.png",title:"转账申请已成功提交"})):uni.showToast({image:"../static/Common.fail.png",title:"转账申请提交失败"});case 38:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()}};e.default=l}).call(this,n("5a52")["default"])},f03b:function(t,e,n){"use strict";n.r(e);var s=n("dbda"),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=a.a}}]);